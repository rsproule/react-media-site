!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("preact")):"function"==typeof define&&define.amd?define(["preact"],t):n.PreactCSSTransitionGroup=t(n.preact)}(this,function(n){"use strict";function t(n){return n.attributes&&n.attributes.key}function e(n){return n.base}function i(n){return n&&n[0]}function r(n){return n&&n.filter(function(n){return null!==n})}function o(n,t){for(var e=n.length;e--;)if(t(n[e]))return!0;return!1}function s(n,e){return o(n,function(n){return t(n)===e})}function a(n,e){return s(n,t(e))}function u(n,e,i){return o(n,function(n){return t(n)===e&&n.props[i]})}function c(n,e,i){return u(n,t(e),i)}function p(n,e){var i=[],r={},o=[];return n.forEach(function(n){var i=t(n);s(e,i)?o.length&&(r[i]=o,o=[]):o.push(n)}),e.forEach(function(n){var e=t(n);r.hasOwnProperty(e)&&(i=i.concat(r[e])),i.push(n)}),i.concat(o)}function l(n,t){if(n.classList){var e;(e=n.classList).add.apply(e,t.split(" "))}else n.className+=" "+t}function h(n,t){if(t=t.trim(),n.classList){var e;(e=n.classList).remove.apply(e,t.split(" "))}else{var i=n.className.trim(),r=E(i);for(t=y+t+y;r.indexOf(t)>=0;)r=r.replace(t,y);n.className=r.trim()}}function f(){var n=document.createElement("div"),t=n.style;"AnimationEvent"in window||delete T.animationend.animation,"TransitionEvent"in window||delete T.transitionend.transition;for(var e in T){var i=T[e];for(var r in i)if(r in t){L.push(i[r]);break}}}function m(n,t){return L.length?void L.forEach(function(e){n.addEventListener(e,t,!1)}):window.setTimeout(t,0)}function d(n,t){L.length&&L.forEach(function(e){n.removeEventListener(e,t,!1)})}var y=" ",v=/[\n\t\r]+/g,E=function(n){return(y+n+y).replace(v,y)},T={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},L=[];"undefined"!=typeof window&&f();var g=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},b=function(n,t){var e={};for(var i in n)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},k=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},N=17,O=function(n){function t(){var i,r,o;g(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return i=r=k(this,n.call.apply(n,[this].concat(a))),r.flushClassNameQueue=function(){e(r)&&l(e(r),r.classNameQueue.join(" ")),r.classNameQueue.length=0,r.timeout=null},o=i,k(r,o)}return w(t,n),t.prototype.transition=function(n,t){var i=this,r=e(this),o=this.props.name[n]||this.props.name+"-"+n,s=this.props.name[n+"Active"]||o+"-active";this.endListener&&this.endListener(),this.endListener=function(n){n&&n.target!==r||(h(r,o),h(r,s),d(r,i.endListener),i.endListener=null,t&&t())},m(r,this.endListener),l(r,o),this.queueClass(s)},t.prototype.queueClass=function(n){this.classNameQueue.push(n),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,N))},t.prototype.stop=function(){this.timeout&&(clearTimeout(this.timeout),this.classNameQueue.length=0,this.timeout=null),this.endListener&&this.endListener()},t.prototype.componentWillMount=function(){this.classNameQueue=[]},t.prototype.componentWillUnmount=function(){this.timeout&&clearTimeout(this.timeout)},t.prototype.componentWillEnter=function(n){this.props.enter?this.transition("enter",n):n()},t.prototype.componentWillLeave=function(n){this.props.leave?this.transition("leave",n):n()},t.prototype.render=function(){return i(this.props.children)},t}(n.Component),W=function(e){function i(r){g(this,i);var o=k(this,e.call(this));return o.renderChild=function(e){var i=o.props,r=i.transitionName,s=i.transitionEnter,a=i.transitionLeave,u=t(e);return n.h(O,{key:u,ref:function(n){(o.refs[u]=n)||(e=null)},name:r,enter:s,leave:a},e)},o.refs={},o.state={children:(r.children||[]).slice()},o}return w(i,e),i.prototype.shouldComponentUpdate=function(n,t){var e=t.children;return e!==this.state.children},i.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},i.prototype.componentWillReceiveProps=function(e){var i=this,o=e.children,s=e.exclusive,u=e.showProp,l=r(o||[]).slice(),h=r(s?this.props.children:this.state.children),f=p(h,l);u&&(f=f.map(function(t){if(!t.props[u]&&c(h,t,u)){var e;t=n.cloneElement(t,(e={},e[u]=!0,e))}return t})),s&&f.forEach(function(n){return i.stop(t(n))}),this.setState({children:f}),this.forceUpdate(),l.forEach(function(n){var t=n.key,e=h&&a(h,n);if(u){if(e){var r=c(h,n,u),o=n.props[u];r||!o||i.currentlyTransitioningKeys[t]||i.keysToEnter.push(t)}}else e||i.currentlyTransitioningKeys[t]||i.keysToEnter.push(t)}),h.forEach(function(n){var t=n.key,e=l&&a(l,n);if(u){if(e){var r=c(l,n,u),o=n.props[u];r||!o||i.currentlyTransitioningKeys[t]||i.keysToLeave.push(t)}}else e||i.currentlyTransitioningKeys[t]||i.keysToLeave.push(t)})},i.prototype.performEnter=function(n){var t=this;this.currentlyTransitioningKeys[n]=!0;var e=this.refs[n];e.componentWillEnter?e.componentWillEnter(function(){return t._handleDoneEntering(n)}):this._handleDoneEntering(n)},i.prototype._handleDoneEntering=function(n){delete this.currentlyTransitioningKeys[n];var t=r(this.props.children),e=this.props.showProp;!t||!e&&!s(t,n)||e&&!u(t,n,e)?this.performLeave(n):this.setState({children:t})},i.prototype.stop=function(n){delete this.currentlyTransitioningKeys[n];var t=this.refs[n];t&&t.stop()},i.prototype.performLeave=function(n){var t=this;this.currentlyTransitioningKeys[n]=!0;var e=this.refs[n];e&&e.componentWillLeave?e.componentWillLeave(function(){return t._handleDoneLeaving(n)}):this._handleDoneLeaving(n)},i.prototype._handleDoneLeaving=function(n){delete this.currentlyTransitioningKeys[n];var t=this.props.showProp,e=r(this.props.children);t&&e&&u(e,n,t)?this.performEnter(n):!t&&e&&s(e,n)?this.performEnter(n):this.setState({children:e})},i.prototype.componentDidUpdate=function(){var n=this,t=this.keysToEnter,e=this.keysToLeave;this.keysToEnter=[],t.forEach(function(t){return n.performEnter(t)}),this.keysToLeave=[],e.forEach(function(t){return n.performLeave(t)})},i.prototype.render=function(t,e){var i=t.component,o=(t.transitionName,t.transitionEnter,t.transitionLeave,t.children,b(t,["component","transitionName","transitionEnter","transitionLeave","children"])),s=e.children;return n.h(i,o,r(s).map(this.renderChild))},i}(n.Component);return W.defaultProps={component:"span",transitionEnter:!0,transitionLeave:!0},W});
//# sourceMappingURL=preact-css-transition-group.min.js.map